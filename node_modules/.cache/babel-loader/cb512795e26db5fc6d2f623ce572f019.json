{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _errors = require(\"./errors\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n} // Handle HTTP errors.\n\n\nvar _default = function _default() {\n  // Request interceptor\n  _axios[\"default\"].interceptors.request.use(function (config) {\n    var token = localStorage.getItem('token');\n    var username = localStorage.getItem('username');\n    var password = localStorage.getItem('password');\n    var newConfig = config; // When a 'token' is available set as Bearer token.\n\n    if (token) {\n      newConfig.headers.Authorization = \"Bearer \".concat(token);\n    } // When username and password are available use\n    // as basic auth credentials.\n\n\n    if (username && password) {\n      newConfig.auth = {\n        username: username,\n        password: password\n      };\n    }\n\n    return newConfig;\n  }, function (err) {\n    return Promise.reject(err);\n  }); // Response interceptor\n\n\n  _axios[\"default\"].interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    var _error$response = error.response,\n        status = _error$response.status,\n        data = _error$response.data;\n\n    if (status < 200 || status >= 300) {\n      return Promise.reject(new _errors.HttpError(data, status));\n    }\n\n    return Promise.reject(error);\n  });\n};\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/mark/Documents/space-of-space-front/node_modules/ra-jsonapi-client/build/initializer.js"],"names":["Object","defineProperty","exports","value","_axios","_interopRequireDefault","require","_errors","obj","__esModule","_default","interceptors","request","use","config","token","localStorage","getItem","username","password","newConfig","headers","Authorization","concat","auth","err","Promise","reject","response","error","_error$response","status","data","HttpError"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,MAAM,GAAGC,sBAAsB,CAACC,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIC,OAAO,GAAGD,OAAO,CAAC,UAAD,CAArB;;AAEA,SAASD,sBAAT,CAAgCG,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D,C,CAEjG;;;AACA,IAAIE,QAAQ,GAAG,SAASA,QAAT,GAAoB;AACjC;AACAN,EAAAA,MAAM,CAAC,SAAD,CAAN,CAAkBO,YAAlB,CAA+BC,OAA/B,CAAuCC,GAAvC,CAA2C,UAAUC,MAAV,EAAkB;AAC3D,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACA,QAAIC,QAAQ,GAAGF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;AACA,QAAIE,QAAQ,GAAGH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;AACA,QAAIG,SAAS,GAAGN,MAAhB,CAJ2D,CAInC;;AAExB,QAAIC,KAAJ,EAAW;AACTK,MAAAA,SAAS,CAACC,OAAV,CAAkBC,aAAlB,GAAkC,UAAUC,MAAV,CAAiBR,KAAjB,CAAlC;AACD,KAR0D,CAQzD;AACF;;;AAGA,QAAIG,QAAQ,IAAIC,QAAhB,EAA0B;AACxBC,MAAAA,SAAS,CAACI,IAAV,GAAiB;AACfN,QAAAA,QAAQ,EAAEA,QADK;AAEfC,QAAAA,QAAQ,EAAEA;AAFK,OAAjB;AAID;;AAED,WAAOC,SAAP;AACD,GApBD,EAoBG,UAAUK,GAAV,EAAe;AAChB,WAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD,GAtBD,EAFiC,CAwB7B;;;AAGJrB,EAAAA,MAAM,CAAC,SAAD,CAAN,CAAkBO,YAAlB,CAA+BiB,QAA/B,CAAwCf,GAAxC,CAA4C,UAAUe,QAAV,EAAoB;AAC9D,WAAOA,QAAP;AACD,GAFD,EAEG,UAAUC,KAAV,EAAiB;AAClB,QAAIC,eAAe,GAAGD,KAAK,CAACD,QAA5B;AAAA,QACIG,MAAM,GAAGD,eAAe,CAACC,MAD7B;AAAA,QAEIC,IAAI,GAAGF,eAAe,CAACE,IAF3B;;AAIA,QAAID,MAAM,GAAG,GAAT,IAAgBA,MAAM,IAAI,GAA9B,EAAmC;AACjC,aAAOL,OAAO,CAACC,MAAR,CAAe,IAAIpB,OAAO,CAAC0B,SAAZ,CAAsBD,IAAtB,EAA4BD,MAA5B,CAAf,CAAP;AACD;;AAED,WAAOL,OAAO,CAACC,MAAR,CAAeE,KAAf,CAAP;AACD,GAZD;AAaD,CAxCD;;AA0CA3B,OAAO,CAAC,SAAD,CAAP,GAAqBQ,QAArB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _errors = require(\"./errors\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n// Handle HTTP errors.\nvar _default = function _default() {\n  // Request interceptor\n  _axios[\"default\"].interceptors.request.use(function (config) {\n    var token = localStorage.getItem('token');\n    var username = localStorage.getItem('username');\n    var password = localStorage.getItem('password');\n    var newConfig = config; // When a 'token' is available set as Bearer token.\n\n    if (token) {\n      newConfig.headers.Authorization = \"Bearer \".concat(token);\n    } // When username and password are available use\n    // as basic auth credentials.\n\n\n    if (username && password) {\n      newConfig.auth = {\n        username: username,\n        password: password\n      };\n    }\n\n    return newConfig;\n  }, function (err) {\n    return Promise.reject(err);\n  }); // Response interceptor\n\n\n  _axios[\"default\"].interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    var _error$response = error.response,\n        status = _error$response.status,\n        data = _error$response.data;\n\n    if (status < 200 || status >= 300) {\n      return Promise.reject(new _errors.HttpError(data, status));\n    }\n\n    return Promise.reject(error);\n  });\n};\n\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}